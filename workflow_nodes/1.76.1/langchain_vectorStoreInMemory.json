{
  "nodeType": "@n8n/n8n-nodes-langchain.vectorStoreInMemory",
  "displayName": "In-Memory Vector Store",
  "description": "Work with your data in In-Memory Vector Store",
  "version": [
    1,
    1.1,
    1.2,
    1.3
  ],
  "properties": [
    {
      "name": "mode",
      "displayName": "Operation Mode",
      "type": "options",
      "default": "retrieve",
      "options": [
        {
          "name": "Get Many",
          "value": "load"
        },
        {
          "name": "Insert Documents",
          "value": "insert"
        },
        {
          "name": "Retrieve Documents (As Vector Store for Chain/Tool)",
          "value": "retrieve"
        },
        {
          "name": "Retrieve Documents (As Tool for AI Agent)",
          "value": "retrieve-as-tool"
        }
      ]
    },
    {
      "name": "toolName",
      "displayName": "Name",
      "type": "string",
      "default": "",
      "description": "Name of the vector store",
      "placeholder": "e.g. company_knowledge_base",
      "required": true,
      "displayOptions": {
        "show": {
          "mode": [
            "retrieve-as-tool"
          ],
          "@version": [
            {
              "_cnd": {
                "lte": 1.2
              }
            }
          ]
        }
      }
    },
    {
      "name": "toolDescription",
      "displayName": "Description",
      "type": "string",
      "default": "",
      "description": "Explain to the LLM what this tool does, a good, specific description would allow LLMs to produce expected results much more often",
      "placeholder": "e.g. Work with your data in a vector store",
      "required": true,
      "typeOptions": {
        "rows": 2
      },
      "displayOptions": {
        "show": {
          "mode": [
            "retrieve-as-tool"
          ]
        }
      }
    },
    {
      "name": "embeddingBatchSize",
      "displayName": "Embedding Batch Size",
      "type": "number",
      "default": 200,
      "description": "Number of documents to embed in a single batch",
      "displayOptions": {
        "show": {
          "mode": [
            "insert"
          ],
          "@version": [
            {
              "_cnd": {
                "gte": 1.1
              }
            }
          ]
        }
      }
    },
    {
      "name": "prompt",
      "displayName": "Prompt",
      "type": "string",
      "default": "",
      "description": "Search prompt to retrieve matching documents from the vector store using similarity-based ranking",
      "required": true,
      "displayOptions": {
        "show": {
          "mode": [
            "load"
          ]
        }
      }
    },
    {
      "name": "topK",
      "displayName": "Limit",
      "type": "number",
      "default": 4,
      "description": "Number of top results to fetch from vector store",
      "displayOptions": {
        "show": {
          "mode": [
            "load",
            "retrieve-as-tool"
          ]
        }
      }
    },
    {
      "name": "includeDocumentMetadata",
      "displayName": "Include Metadata",
      "type": "boolean",
      "default": true,
      "description": "Whether or not to include document metadata",
      "displayOptions": {
        "show": {
          "mode": [
            "load",
            "retrieve-as-tool"
          ]
        }
      }
    },
    {
      "name": "useReranker",
      "displayName": "Rerank Results",
      "type": "boolean",
      "default": false,
      "description": "Whether or not to rerank results",
      "displayOptions": {
        "show": {
          "mode": [
            "load",
            "retrieve",
            "retrieve-as-tool"
          ]
        }
      }
    },
    {
      "name": "id",
      "displayName": "ID",
      "type": "string",
      "default": "",
      "description": "ID of an embedding entry",
      "required": true,
      "displayOptions": {
        "show": {
          "mode": [
            "update"
          ]
        }
      }
    },
    {
      "name": "notice",
      "displayName": "The embbded data are stored in the server memory, so they will be lost when the server is restarted. Additionally, if the amount of data is too large, it may cause the server to crash due to insufficient memory.",
      "type": "notice",
      "default": "",
      "displayOptions": {
        "show": {
          "mode": [
            "insert"
          ]
        }
      }
    },
    {
      "name": "clearStore",
      "displayName": "Clear Store",
      "type": "boolean",
      "default": false,
      "description": "Whether to clear the store before inserting new data",
      "displayOptions": {
        "show": {
          "mode": [
            "insert"
          ]
        }
      }
    }
  ],
  "credentialsConfig": [],
  "io": {},
  "wiring": {
    "role": "vectorStore",
    "requires": [
      "AiDocument"
    ],
    "optional": [
      "AiEmbedding"
    ],
    "consumedBy": [
      "AiRetriever",
      "AiTool"
    ],
    "consumes": [],
    "produces": []
  }
}